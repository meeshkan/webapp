{"ast":null,"code":"var _jsxFileName = \"/Users/makennasmutz/Documents/GitHub/webapp/src/pages/auth/index.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nimport { NextAuth } from \"next-auth/client\";\nexport default class extends React.Component {\n  static async getInitialProps({\n    req\n  }) {\n    return {\n      session: await NextAuth.init({\n        req\n      }),\n      linkedAccounts: await NextAuth.linked({\n        req\n      }),\n      providers: await NextAuth.providers({\n        req\n      })\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      session: this.props.session\n    };\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleSignInSubmit = this.handleSignInSubmit.bind(this);\n  }\n\n  handleEmailChange(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  handleSignInSubmit(event) {\n    event.preventDefault();\n    if (!this.state.email) return;\n    NextAuth.signin(this.state.email).then(() => {\n      Router.push(`/auth/check-email?email=${this.state.email}`);\n    }).catch(() => {\n      Router.push(`/auth/error?action=signin&type=email&email=${this.state.email}`);\n    });\n  }\n\n  render() {\n    if (this.props.session.user) {\n      return __jsx(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }\n      }, __jsx(\"h1\", {\n        className: \"display-4 mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }\n      }, \"NextAuth Example\"), __jsx(\"p\", {\n        className: \"lead mt-3 mb-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }\n      }, \"You are signed in as\", \" \", __jsx(\"span\", {\n        className: \"font-weight-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }\n      }, this.props.session.user.email), \".\")), __jsx(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        className: \"col-sm-5 mr-auto ml-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }\n      }, __jsx(LinkAccounts, {\n        session: this.props.session,\n        linkedAccounts: this.props.linkedAccounts,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }\n      }))), __jsx(\"p\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }\n      }, __jsx(Link, {\n        href: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }\n      }, \"Home\"))));\n    } else {\n      return __jsx(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      }, __jsx(\"h1\", {\n        className: \"display-4 mt-3 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }\n      }, \"NextAuth Example\")), __jsx(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        className: \"col-sm-6 mr-auto ml-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"card mt-3 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }\n      }, __jsx(\"h4\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }, \"Sign In\"), __jsx(\"div\", {\n        className: \"card-body pb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }\n      }, __jsx(SignInButtons, {\n        providers: this.props.providers,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 19\n        }\n      }), __jsx(\"form\", {\n        id: \"signin\",\n        method: \"post\",\n        action: \"/auth/email/signin\",\n        onSubmit: this.handleSignInSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 19\n        }\n      }, __jsx(\"input\", {\n        name: \"_csrf\",\n        type: \"hidden\",\n        value: this.state.session.csrfToken,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }\n      }), __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      }, __jsx(\"label\", {\n        htmlFor: \"email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 23\n        }\n      }, \"Email address\"), __jsx(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 23\n        }\n      }), __jsx(\"input\", {\n        name: \"email\",\n        type: \"text\",\n        placeholder: \"j.smith@example.com\",\n        id: \"email\",\n        className: \"form-control\",\n        value: this.state.email,\n        onChange: this.handleEmailChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 23\n        }\n      })), __jsx(\"p\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }\n      }, __jsx(\"button\", {\n        id: \"submitButton\",\n        type: \"submit\",\n        className: \"btn btn-outline-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 23\n        }\n      }, \"Sign in with email\"))))))), __jsx(\"p\", {\n        className: \"text-center small\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }, __jsx(Link, {\n        href: \"/auth/credentials\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }\n      }, \"Sign in with credentials\"))), __jsx(\"p\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }\n      }, __jsx(Link, {\n        href: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }\n      }, \"Home\"))));\n    }\n  }\n\n}\nexport class LinkAccounts extends React.Component {\n  render() {\n    return __jsx(\"div\", {\n      className: \"card mt-3 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, __jsx(\"h4\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, \"Link Accounts\"), __jsx(\"div\", {\n      className: \"card-body pb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }\n    }, Object.keys(this.props.linkedAccounts).map((provider, i) => {\n      return __jsx(LinkAccount, {\n        key: i,\n        provider: provider,\n        session: this.props.session,\n        linked: this.props.linkedAccounts[provider],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 15\n        }\n      });\n    })));\n  }\n\n}\nexport class LinkAccount extends React.Component {\n  render() {\n    if (this.props.linked === true) {\n      return __jsx(\"form\", {\n        method: \"post\",\n        action: `/auth/oauth/${this.props.provider.toLowerCase()}/unlink`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 9\n        }\n      }, __jsx(\"input\", {\n        name: \"_csrf\",\n        type: \"hidden\",\n        value: this.props.session.csrfToken,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }\n      }), __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }\n      }, __jsx(\"button\", {\n        className: \"btn btn-block btn-outline-danger\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }\n      }, \"Unlink from \", this.props.provider)));\n    } else {\n      return __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 9\n        }\n      }, __jsx(\"a\", {\n        className: \"btn btn-block btn-outline-primary\",\n        href: `/auth/oauth/${this.props.provider.toLowerCase()}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }\n      }, \"Link with \", this.props.provider));\n    }\n  }\n\n}\nexport class SignInButtons extends React.Component {\n  render() {\n    return __jsx(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 7\n      }\n    }, Object.keys(this.props.providers).map((provider, i) => {\n      return __jsx(\"p\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }\n      }, __jsx(\"a\", {\n        className: \"btn btn-block btn-outline-secondary\",\n        href: this.props.providers[provider].signin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 15\n        }\n      }, \"Sign in with \", provider));\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/makennasmutz/Documents/GitHub/webapp/src/pages/auth/index.js"],"names":["React","Router","Link","NextAuth","Component","getInitialProps","req","session","init","linkedAccounts","linked","providers","constructor","props","state","email","handleEmailChange","bind","handleSignInSubmit","event","setState","target","value","preventDefault","signin","then","push","catch","render","user","csrfToken","LinkAccounts","Object","keys","map","provider","i","LinkAccount","toLowerCase","SignInButtons"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nimport { NextAuth } from \"next-auth/client\";\n\nexport default class extends React.Component {\n  static async getInitialProps({ req }) {\n    return {\n      session: await NextAuth.init({ req }),\n      linkedAccounts: await NextAuth.linked({ req }),\n      providers: await NextAuth.providers({ req }),\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      session: this.props.session,\n    };\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleSignInSubmit = this.handleSignInSubmit.bind(this);\n  }\n\n  handleEmailChange(event) {\n    this.setState({\n      email: event.target.value,\n    });\n  }\n\n  handleSignInSubmit(event) {\n    event.preventDefault();\n\n    if (!this.state.email) return;\n\n    NextAuth.signin(this.state.email)\n      .then(() => {\n        Router.push(`/auth/check-email?email=${this.state.email}`);\n      })\n      .catch(() => {\n        Router.push(\n          `/auth/error?action=signin&type=email&email=${this.state.email}`\n        );\n      });\n  }\n\n  render() {\n    if (this.props.session.user) {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-4 mt-3\">NextAuth Example</h1>\n            <p className=\"lead mt-3 mb-1\">\n              You are signed in as{\" \"}\n              <span className=\"font-weight-bold\">\n                {this.props.session.user.email}\n              </span>\n              .\n            </p>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-5 mr-auto ml-auto\">\n              <LinkAccounts\n                session={this.props.session}\n                linkedAccounts={this.props.linkedAccounts}\n              />\n            </div>\n          </div>\n          <p className=\"text-center\">\n            <Link href=\"/\">\n              <a>Home</a>\n            </Link>\n          </p>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-4 mt-3 mb-3\">NextAuth Example</h1>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-6 mr-auto ml-auto\">\n              <div className=\"card mt-3 mb-3\">\n                <h4 className=\"card-header\">Sign In</h4>\n                <div className=\"card-body pb-0\">\n                  <SignInButtons providers={this.props.providers} />\n                  <form\n                    id=\"signin\"\n                    method=\"post\"\n                    action=\"/auth/email/signin\"\n                    onSubmit={this.handleSignInSubmit}\n                  >\n                    <input\n                      name=\"_csrf\"\n                      type=\"hidden\"\n                      value={this.state.session.csrfToken}\n                    />\n                    <p>\n                      <label htmlFor=\"email\">Email address</label>\n                      <br />\n                      <input\n                        name=\"email\"\n                        type=\"text\"\n                        placeholder=\"j.smith@example.com\"\n                        id=\"email\"\n                        className=\"form-control\"\n                        value={this.state.email}\n                        onChange={this.handleEmailChange}\n                      />\n                    </p>\n                    <p className=\"text-right\">\n                      <button\n                        id=\"submitButton\"\n                        type=\"submit\"\n                        className=\"btn btn-outline-primary\"\n                      >\n                        Sign in with email\n                      </button>\n                    </p>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n          <p className=\"text-center small\">\n            <Link href=\"/auth/credentials\">\n              <a>Sign in with credentials</a>\n            </Link>\n          </p>\n          <p className=\"text-center\">\n            <Link href=\"/\">\n              <a>Home</a>\n            </Link>\n          </p>\n        </div>\n      );\n    }\n  }\n}\n\nexport class LinkAccounts extends React.Component {\n  render() {\n    return (\n      <div className=\"card mt-3 mb-3\">\n        <h4 className=\"card-header\">Link Accounts</h4>\n        <div className=\"card-body pb-0\">\n          {Object.keys(this.props.linkedAccounts).map((provider, i) => {\n            return (\n              <LinkAccount\n                key={i}\n                provider={provider}\n                session={this.props.session}\n                linked={this.props.linkedAccounts[provider]}\n              />\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport class LinkAccount extends React.Component {\n  render() {\n    if (this.props.linked === true) {\n      return (\n        <form\n          method=\"post\"\n          action={`/auth/oauth/${this.props.provider.toLowerCase()}/unlink`}\n        >\n          <input\n            name=\"_csrf\"\n            type=\"hidden\"\n            value={this.props.session.csrfToken}\n          />\n          <p>\n            <button className=\"btn btn-block btn-outline-danger\" type=\"submit\">\n              Unlink from {this.props.provider}\n            </button>\n          </p>\n        </form>\n      );\n    } else {\n      return (\n        <p>\n          <a\n            className=\"btn btn-block btn-outline-primary\"\n            href={`/auth/oauth/${this.props.provider.toLowerCase()}`}\n          >\n            Link with {this.props.provider}\n          </a>\n        </p>\n      );\n    }\n  }\n}\n\nexport class SignInButtons extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        {Object.keys(this.props.providers).map((provider, i) => {\n          return (\n            <p key={i}>\n              <a\n                className=\"btn btn-block btn-outline-secondary\"\n                href={this.props.providers[provider].signin}\n              >\n                Sign in with {provider}\n              </a>\n            </p>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
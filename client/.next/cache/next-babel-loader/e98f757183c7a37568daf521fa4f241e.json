{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/makennasmutz/Documents/GitHub/webapp/src/pages/auth/index.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nimport { NextAuth } from \"next-auth/client\";\n\nvar _default = /*#__PURE__*/function (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  var _super = _createSuper(_default);\n\n  _createClass(_default, null, [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(_ref) {\n      var req;\n      return _regeneratorRuntime.async(function getInitialProps$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              req = _ref.req;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(NextAuth.init({\n                req: req\n              }));\n\n            case 3:\n              _context.t0 = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(NextAuth.linked({\n                req: req\n              }));\n\n            case 6:\n              _context.t1 = _context.sent;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(NextAuth.providers({\n                req: req\n              }));\n\n            case 9:\n              _context.t2 = _context.sent;\n              return _context.abrupt(\"return\", {\n                session: _context.t0,\n                linkedAccounts: _context.t1,\n                providers: _context.t2\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }]);\n\n  function _default(props) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      email: \"\",\n      session: _this.props.session\n    };\n    _this.handleEmailChange = _this.handleEmailChange.bind(_assertThisInitialized(_this));\n    _this.handleSignInSubmit = _this.handleSignInSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"handleEmailChange\",\n    value: function handleEmailChange(event) {\n      this.setState({\n        email: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSignInSubmit\",\n    value: function handleSignInSubmit(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      if (!this.state.email) return;\n      NextAuth.signin(this.state.email).then(function () {\n        Router.push(\"/auth/check-email?email=\".concat(_this2.state.email));\n      })[\"catch\"](function () {\n        Router.push(\"/auth/error?action=signin&type=email&email=\".concat(_this2.state.email));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.session.user) {\n        return __jsx(\"div\", {\n          className: \"container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 9\n          }\n        }, __jsx(\"div\", {\n          className: \"text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 11\n          }\n        }, __jsx(\"h1\", {\n          className: \"display-4 mt-3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }\n        }, \"NextAuth Example\"), __jsx(\"p\", {\n          className: \"lead mt-3 mb-1\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }\n        }, \"You are signed in as\", \" \", __jsx(\"span\", {\n          className: \"font-weight-bold\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }\n        }, this.props.session.user.email), \".\")), __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 11\n          }\n        }, __jsx(\"div\", {\n          className: \"col-sm-5 mr-auto ml-auto\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }\n        }, __jsx(LinkAccounts, {\n          session: this.props.session,\n          linkedAccounts: this.props.linkedAccounts,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }\n        }))), __jsx(\"p\", {\n          className: \"text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 11\n          }\n        }, __jsx(Link, {\n          href: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }\n        }, __jsx(\"a\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }\n        }, \"Home\"))));\n      } else {\n        return __jsx(\"div\", {\n          className: \"container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 9\n          }\n        }, __jsx(\"div\", {\n          className: \"text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }\n        }, __jsx(\"h1\", {\n          className: \"display-4 mt-3 mb-3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }\n        }, \"NextAuth Example\")), __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 11\n          }\n        }, __jsx(\"div\", {\n          className: \"col-sm-6 mr-auto ml-auto\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }\n        }, __jsx(\"div\", {\n          className: \"card mt-3 mb-3\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }\n        }, __jsx(\"h4\", {\n          className: \"card-header\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }\n        }, \"Sign In\"), __jsx(\"div\", {\n          className: \"card-body pb-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }\n        }, __jsx(SignInButtons, {\n          providers: this.props.providers,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 19\n          }\n        }), __jsx(\"form\", {\n          id: \"signin\",\n          method: \"post\",\n          action: \"/auth/email/signin\",\n          onSubmit: this.handleSignInSubmit,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }\n        }, __jsx(\"input\", {\n          name: \"_csrf\",\n          type: \"hidden\",\n          value: this.state.session.csrfToken,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 21\n          }\n        }), __jsx(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 21\n          }\n        }, __jsx(\"label\", {\n          htmlFor: \"email\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 23\n          }\n        }, \"Email address\"), __jsx(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 23\n          }\n        }), __jsx(\"input\", {\n          name: \"email\",\n          type: \"text\",\n          placeholder: \"j.smith@example.com\",\n          id: \"email\",\n          className: \"form-control\",\n          value: this.state.email,\n          onChange: this.handleEmailChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 23\n          }\n        })), __jsx(\"p\", {\n          className: \"text-right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }\n        }, __jsx(\"button\", {\n          id: \"submitButton\",\n          type: \"submit\",\n          className: \"btn btn-outline-primary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 23\n          }\n        }, \"Sign in with email\"))))))), __jsx(\"p\", {\n          className: \"text-center small\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 11\n          }\n        }, __jsx(Link, {\n          href: \"/auth/credentials\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }\n        }, __jsx(\"a\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }\n        }, \"Sign in with credentials\"))), __jsx(\"p\", {\n          className: \"text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }\n        }, __jsx(Link, {\n          href: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }\n        }, __jsx(\"a\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }\n        }, \"Home\"))));\n      }\n    }\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };\nexport var LinkAccounts = /*#__PURE__*/function (_React$Component2) {\n  _inherits(LinkAccounts, _React$Component2);\n\n  var _super2 = _createSuper(LinkAccounts);\n\n  function LinkAccounts() {\n    _classCallCheck(this, LinkAccounts);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(LinkAccounts, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return __jsx(\"div\", {\n        className: \"card mt-3 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 7\n        }\n      }, __jsx(\"h4\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 9\n        }\n      }, \"Link Accounts\"), __jsx(\"div\", {\n        className: \"card-body pb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }, Object.keys(this.props.linkedAccounts).map(function (provider, i) {\n        return __jsx(LinkAccount, {\n          key: i,\n          provider: provider,\n          session: _this3.props.session,\n          linked: _this3.props.linkedAccounts[provider],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }\n        });\n      })));\n    }\n  }]);\n\n  return LinkAccounts;\n}(React.Component);\nexport var LinkAccount = /*#__PURE__*/function (_React$Component3) {\n  _inherits(LinkAccount, _React$Component3);\n\n  var _super3 = _createSuper(LinkAccount);\n\n  function LinkAccount() {\n    _classCallCheck(this, LinkAccount);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(LinkAccount, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.linked === true) {\n        return __jsx(\"form\", {\n          method: \"post\",\n          action: \"/auth/oauth/\".concat(this.props.provider.toLowerCase(), \"/unlink\"),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 9\n          }\n        }, __jsx(\"input\", {\n          name: \"_csrf\",\n          type: \"hidden\",\n          value: this.props.session.csrfToken,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 11\n          }\n        }), __jsx(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 11\n          }\n        }, __jsx(\"button\", {\n          className: \"btn btn-block btn-outline-danger\",\n          type: \"submit\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }\n        }, \"Unlink from \", this.props.provider)));\n      } else {\n        return __jsx(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 9\n          }\n        }, __jsx(\"a\", {\n          className: \"btn btn-block btn-outline-primary\",\n          href: \"/auth/oauth/\".concat(this.props.provider.toLowerCase()),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 11\n          }\n        }, \"Link with \", this.props.provider));\n      }\n    }\n  }]);\n\n  return LinkAccount;\n}(React.Component);\nexport var SignInButtons = /*#__PURE__*/function (_React$Component4) {\n  _inherits(SignInButtons, _React$Component4);\n\n  var _super4 = _createSuper(SignInButtons);\n\n  function SignInButtons() {\n    _classCallCheck(this, SignInButtons);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(SignInButtons, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return __jsx(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 7\n        }\n      }, Object.keys(this.props.providers).map(function (provider, i) {\n        return __jsx(\"p\", {\n          key: i,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }\n        }, __jsx(\"a\", {\n          className: \"btn btn-block btn-outline-secondary\",\n          href: _this4.props.providers[provider].signin,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }\n        }, \"Sign in with \", provider));\n      }));\n    }\n  }]);\n\n  return SignInButtons;\n}(React.Component);","map":{"version":3,"sources":["/Users/makennasmutz/Documents/GitHub/webapp/src/pages/auth/index.js"],"names":["React","Router","Link","NextAuth","req","init","linked","providers","session","linkedAccounts","props","state","email","handleEmailChange","bind","handleSignInSubmit","event","setState","target","value","preventDefault","signin","then","push","user","csrfToken","Component","LinkAccounts","Object","keys","map","provider","i","LinkAccount","toLowerCase","SignInButtons"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nimport { NextAuth } from \"next-auth/client\";\n\nexport default class extends React.Component {\n  static async getInitialProps({ req }) {\n    return {\n      session: await NextAuth.init({ req }),\n      linkedAccounts: await NextAuth.linked({ req }),\n      providers: await NextAuth.providers({ req }),\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      session: this.props.session,\n    };\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleSignInSubmit = this.handleSignInSubmit.bind(this);\n  }\n\n  handleEmailChange(event) {\n    this.setState({\n      email: event.target.value,\n    });\n  }\n\n  handleSignInSubmit(event) {\n    event.preventDefault();\n\n    if (!this.state.email) return;\n\n    NextAuth.signin(this.state.email)\n      .then(() => {\n        Router.push(`/auth/check-email?email=${this.state.email}`);\n      })\n      .catch(() => {\n        Router.push(\n          `/auth/error?action=signin&type=email&email=${this.state.email}`\n        );\n      });\n  }\n\n  render() {\n    if (this.props.session.user) {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-4 mt-3\">NextAuth Example</h1>\n            <p className=\"lead mt-3 mb-1\">\n              You are signed in as{\" \"}\n              <span className=\"font-weight-bold\">\n                {this.props.session.user.email}\n              </span>\n              .\n            </p>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-5 mr-auto ml-auto\">\n              <LinkAccounts\n                session={this.props.session}\n                linkedAccounts={this.props.linkedAccounts}\n              />\n            </div>\n          </div>\n          <p className=\"text-center\">\n            <Link href=\"/\">\n              <a>Home</a>\n            </Link>\n          </p>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"container\">\n          <div className=\"text-center\">\n            <h1 className=\"display-4 mt-3 mb-3\">NextAuth Example</h1>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-sm-6 mr-auto ml-auto\">\n              <div className=\"card mt-3 mb-3\">\n                <h4 className=\"card-header\">Sign In</h4>\n                <div className=\"card-body pb-0\">\n                  <SignInButtons providers={this.props.providers} />\n                  <form\n                    id=\"signin\"\n                    method=\"post\"\n                    action=\"/auth/email/signin\"\n                    onSubmit={this.handleSignInSubmit}\n                  >\n                    <input\n                      name=\"_csrf\"\n                      type=\"hidden\"\n                      value={this.state.session.csrfToken}\n                    />\n                    <p>\n                      <label htmlFor=\"email\">Email address</label>\n                      <br />\n                      <input\n                        name=\"email\"\n                        type=\"text\"\n                        placeholder=\"j.smith@example.com\"\n                        id=\"email\"\n                        className=\"form-control\"\n                        value={this.state.email}\n                        onChange={this.handleEmailChange}\n                      />\n                    </p>\n                    <p className=\"text-right\">\n                      <button\n                        id=\"submitButton\"\n                        type=\"submit\"\n                        className=\"btn btn-outline-primary\"\n                      >\n                        Sign in with email\n                      </button>\n                    </p>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n          <p className=\"text-center small\">\n            <Link href=\"/auth/credentials\">\n              <a>Sign in with credentials</a>\n            </Link>\n          </p>\n          <p className=\"text-center\">\n            <Link href=\"/\">\n              <a>Home</a>\n            </Link>\n          </p>\n        </div>\n      );\n    }\n  }\n}\n\nexport class LinkAccounts extends React.Component {\n  render() {\n    return (\n      <div className=\"card mt-3 mb-3\">\n        <h4 className=\"card-header\">Link Accounts</h4>\n        <div className=\"card-body pb-0\">\n          {Object.keys(this.props.linkedAccounts).map((provider, i) => {\n            return (\n              <LinkAccount\n                key={i}\n                provider={provider}\n                session={this.props.session}\n                linked={this.props.linkedAccounts[provider]}\n              />\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport class LinkAccount extends React.Component {\n  render() {\n    if (this.props.linked === true) {\n      return (\n        <form\n          method=\"post\"\n          action={`/auth/oauth/${this.props.provider.toLowerCase()}/unlink`}\n        >\n          <input\n            name=\"_csrf\"\n            type=\"hidden\"\n            value={this.props.session.csrfToken}\n          />\n          <p>\n            <button className=\"btn btn-block btn-outline-danger\" type=\"submit\">\n              Unlink from {this.props.provider}\n            </button>\n          </p>\n        </form>\n      );\n    } else {\n      return (\n        <p>\n          <a\n            className=\"btn btn-block btn-outline-primary\"\n            href={`/auth/oauth/${this.props.provider.toLowerCase()}`}\n          >\n            Link with {this.props.provider}\n          </a>\n        </p>\n      );\n    }\n  }\n}\n\nexport class SignInButtons extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        {Object.keys(this.props.providers).map((provider, i) => {\n          return (\n            <p key={i}>\n              <a\n                className=\"btn btn-block btn-outline-secondary\"\n                href={this.props.providers[provider].signin}\n              >\n                Sign in with {provider}\n              </a>\n            </p>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
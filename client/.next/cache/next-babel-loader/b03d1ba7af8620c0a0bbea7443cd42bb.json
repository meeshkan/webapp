{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"/Users/makennasmutz/Documents/GitHub/webapp/client/src/pages/index.tsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { parseCookies } from \"nookies\";\nimport fetch from \"isomorphic-fetch\"; // Cards\n\nfunction Home(props) {\n  return __jsx(React.Fragment, null, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 7\n    }\n  }, \"Welcome to Nextjs OAuth with GitHub\"), !props.authorization && __jsx(\"a\", {\n    href: \"http://localhost:3001/auth/github\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 9\n    }\n  }, \"Click here to login\")) // <Grid\n  //   templateColumns=\"repeat(3, 1fr)\"\n  //   templateRows=\"repeat(2, 1fr)\"\n  //   gap={8}\n  //   // pos=\"fixed\"\n  //   // bottom={8}\n  //   // right={8}\n  //   // left={8}\n  //   // top={128}\n  // >\n  //   <Settings />\n  //   <Production />\n  //   <Branch />\n  //   <Chart />\n  // </Grid>\n  ;\n}\n\nfunction getUser(authorization) {\n  var res;\n  return _regeneratorRuntime.async(function getUser$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch(\"http://localhost:3001/user\", {\n            headers: {\n              authorization: authorization\n            }\n          }));\n\n        case 2:\n          res = _context.sent;\n\n          if (!(res.status === 200)) {\n            _context.next = 7;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            authorization: authorization,\n            user: res.data\n          });\n\n        case 7:\n          return _context.abrupt(\"return\", {\n            authorization: authorization\n          });\n\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nHome.getInitialProps = function _callee(ctx) {\n  var _parseCookies, authorization, token, props;\n\n  return _regeneratorRuntime.async(function _callee$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _parseCookies = parseCookies(ctx), authorization = _parseCookies.authorization;\n          token = ctx.query.token;\n          props = getUser(authorization || token);\n          return _context2.abrupt(\"return\", props);\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/makennasmutz/Documents/GitHub/webapp/client/src/pages/index.tsx"],"names":["React","parseCookies","fetch","Home","props","authorization","getUser","headers","res","status","user","data","getInitialProps","ctx","token","query"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,YAAT,QAA6B,SAA7B;AACA,OAAOC,KAAP,MAAkB,kBAAlB,C,CAEA;;AAMA,SAASC,IAAT,CAAcC,KAAd,EAAqB;AACnB,SACE,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CADF,EAEG,CAACA,KAAK,CAACC,aAAP,IACC;AAAG,IAAA,IAAI,EAAE,mCAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAHJ,CADF,CAOE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBF;AAuBD;;AACD,SAAeC,OAAf,CAAuBD,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACoBH,KAAK,CAAC,4BAAD,EAA+B;AACpDK,YAAAA,OAAO,EAAE;AAAEF,cAAAA,aAAa,EAAbA;AAAF;AAD2C,WAA/B,CADzB;;AAAA;AACQG,UAAAA,GADR;;AAAA,gBAKMA,GAAG,CAACC,MAAJ,KAAe,GALrB;AAAA;AAAA;AAAA;;AAAA,2CAKiC;AAAEJ,YAAAA,aAAa,EAAbA,aAAF;AAAiBK,YAAAA,IAAI,EAAEF,GAAG,CAACG;AAA3B,WALjC;;AAAA;AAAA,2CAMc;AAAEN,YAAAA,aAAa,EAAbA;AAAF,WANd;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASAF,IAAI,CAACS,eAAL,GAAuB,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,0BACKZ,YAAY,CAACY,GAAD,CADjB,EACbR,aADa,iBACbA,aADa;AAEbS,UAAAA,KAFa,GAEHD,GAAG,CAACE,KAFD,CAEbD,KAFa;AAIfV,UAAAA,KAJe,GAIPE,OAAO,CAACD,aAAa,IAAIS,KAAlB,CAJA;AAAA,4CAMdV,KANc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAvB;;AASA,eAAeD,IAAf","sourcesContent":["import React from \"react\";\nimport { Grid } from \"@chakra-ui/core\";\nimport { parseCookies } from \"nookies\";\nimport fetch from \"isomorphic-fetch\";\n\n// Cards\nimport Settings from \"../components/Dashboard/settings\";\nimport Production from \"../components/Dashboard/production\";\nimport Branch from \"../components/Dashboard/branch\";\nimport Chart from \"../components/Dashboard/chart\";\n\nfunction Home(props) {\n  return (\n    <>\n      <h1>Welcome to Nextjs OAuth with GitHub</h1>\n      {!props.authorization && (\n        <a href={\"http://localhost:3001/auth/github\"}>Click here to login</a>\n      )}\n    </>\n    // <Grid\n    //   templateColumns=\"repeat(3, 1fr)\"\n    //   templateRows=\"repeat(2, 1fr)\"\n    //   gap={8}\n    //   // pos=\"fixed\"\n    //   // bottom={8}\n    //   // right={8}\n    //   // left={8}\n    //   // top={128}\n    // >\n    //   <Settings />\n    //   <Production />\n    //   <Branch />\n    //   <Chart />\n    // </Grid>\n  );\n}\nasync function getUser(authorization) {\n  const res = await fetch(\"http://localhost:3001/user\", {\n    headers: { authorization },\n  });\n\n  if (res.status === 200) return { authorization, user: res.data };\n  else return { authorization };\n}\n\nHome.getInitialProps = async (ctx) => {\n  const { authorization } = parseCookies(ctx);\n  const { token } = ctx.query;\n\n  const props = getUser(authorization || token);\n\n  return props;\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}